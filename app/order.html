<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no"/>
  
	 <link rel="stylesheet" type="text/css" href="public/bootstrap-3.3.4/css/bootstrap.min.css" />
     <link rel="stylesheet" type="text/css" href="public/css/city-pick.css" />
	 <link rel="stylesheet" type="text/css" href="public/css/demo.css" />

   <title></title>
</head>
<body>
    
    <div class="container-fluid" style="padding:0;">
      
        <div class="">
            <form action="order_confirm.html" method="post" id="orderinfo" name="orderinfo" enctype="multipart/form-data">
              
                <p class="titleMsg">填写信息</p>
               
                <div class="tableItem">

                    <ul class="orderMsg list-group">
                      
                       <li class="list-group-item">
                           <span class="pull-left" style="width:100px;">姓名：</span>
                           <div style="overflow:hidden;">
                              <input type="text"  style="width:100%;" id="name">
                           </div>
                       </li>
                       <li class="list-group-item">
                           <span class="pull-left" style="width:100px;">身份证号码：</span>
                           <div style="overflow:hidden;">
                              <input type="text"  style="width:100%;" id="idCard">
                           </div>
                       </li>
                        <li class="list-group-item">
                           <span class="pull-left" style="width:100px;">联系方式：</span>
                           <div style="overflow:hidden;">
                              <input type="text"  style="width:100%;" id="phone">
                           </div>
                       </li>
                        <li class="list-group-item">
                           <span class="pull-left" style="width:86px;">安装地址：</span>
                           <div style="overflow:hidden;">
                              <input type='text' style="width:100%;text-align:right;" id='city-picker' data-simple="true">
                              <label for="city-picker" class="Rimg"><img src="public/images/right.png" alt=""></label>
                           </div>
                       </li>
                       <li class="list-group-item listgroupLast">
                          <textarea id="ADD" placeholder="请输入详细地址" style="resize: none; height:30px; overflow-y: hidden;"></textarea>
                       </li>
                     </ul>
                </div>

                <p class="titleMsg">所在地区可用宽带</p>

              <div class="canUse">
                <ul class="media-list">
		
				</ul>
				<p class="custom"><a href=""><img src="public/images/kefu.png" alt="">客服</a></p>
           
              </div>

              <div class="nonsupport">
                   <img src="public/images/nosup.png" alt="" width="90">
                   <h4>当前地区暂不支持该业务</h4>
              </div>
                   
            </form>
        </div>
    </div>

     <!-- 下单-->
      <div class="app-fixed">
          <p>办理该业务需开通支付宝免密支付服务，服务将在该笔订单结束后自动解除。</p>
          <button type="button" class="btn btn-lg btn-block" id="confirmOrder">芝麻信用先享后付，立即下单</button>
       </div>

</body>
</html>

<script type="text/javascript" src="public/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="public/bootstrap-3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="public/js/textarea.js"></script>
<script type="text/javascript" src="public/js/city-weui.js"></script>
<script type="text/javascript" src="public/js/city-pick.js"></script>
<script type="text/javascript" src="public/js/alert.js"></script>

<!-- textarea自适应 -->
<script>
  var text = document.getElementById("ADD");
  autoTextarea(text);
</script>


<!-- 地区选择 -->
<script>
    $("#city-picker").cityPicker({
        title: "选择省市区/县",
        onChange: function (picker, values, displayValues) {

        	$(".Rimg").hide();
        	console.log(displayValues)

         $(".picker-button").click(function(){

		    var code =1;

            //存在
		      if(code==1){

	      	      $(".canUse").show();
	              $(".app-fixed").show();
	              $(".nonsupport").hide();
	              $(".container-fluid").addClass("PADDING");

		      }
		      //不存在
		      else{

		          $(".nonsupport").show();
		          $(".canUse").hide();
		          $(".app-fixed").hide();
		          $(".container-fluid").removeClass("PADDING");

		      }
          })
           
        }
    });
</script>

<script>
    var json =  [

	             { 
	             	"id":"001",
	             	"img":"public/images/img.png",
	                "title":"浙江电信20M3个月浙江电信20M3个月", 
	                "price":"4000.00",
	                "preferential":
	                    [
	                        {"con":"送5元话券"},
	                        {"con":"送5元话费券"},
	                        {"con":"送5元话费券545345"},
	                        {"con":"送5元话费券"},
	                        {"con":"送5元话费券"},
	                    ] 
	              },
	               { 
	             	"id":"002",
	             	"img":"public/images/img.png",
	                "title":"浙江电信20M3个月浙江电信20M3个月", 
	                "price":"4000.00",
	                "preferential":
	                    [
	                        {"con":"送5元话费券"},
	                        {"con":"送5元话费券"},
	                     
	                    ] 
	              },
	                { 
	             	"id":"003",
	             	"img":"public/images/img.png",
	                "title":"浙江电信20M3个月浙江电信20M3个月", 
	                "price":"4000.00",
	                "preferential":
	                    [
	                        {"con":"送5元话费券"},
	                        {"con":"送5元话费券"},
	                     
	                    ] 
	              }
	            
	          ]

for(var i=0;i<json.length;i++){

      var item=json[i];
      
      var h2 ='';

       $.each(item.preferential,function(){

            h2+= '<span>'+this.con+'</span>'

       })

    var h1=''
              +' <li class="media" id="'+item.id+'">'
			  +'<div class="media-left media-middle">'
			  +' <img class="media-object" src="'+item.img+'"alt="" width="86">'
			  +' </div>'
			  +'<div class="media-body">'
			  +' <h4 class="media-heading"><span>'+item.title+'</span></h4>'
			  +' <p class="price">￥<span>'+item.price+'</span></p>'
			  +'<p class="preferential">'
			  +h2
			  +' </p>'
			  +' </div>'
			  +'<div class="CHECK">'
			  +' <img class="media-object discheck" src="public/images/discheck.png" alt="" width="30">'
			  +' <img class="media-object check" src="public/images/check.png" alt="" width="30">'
			  +' </div>'
			  +'</li>'
           +'' 

    $('.media-list').append(h1);
	
	}

</script>

<script>
 //单列勾选事件
 
$(".media").click(function(){

   $(this).addClass("active")
   $(this).find(".discheck").hide();
   $(this).find(".check").show();

   $(this).siblings(".media").removeClass("active")
   $(this).siblings(".media").find(".check").hide();
   $(this).siblings(".media").find(".discheck").show();

})

</script>

<script>

 //确认下单

var ok = false;

 $("#confirmOrder").click(function(){

    var p=$(".media")
  
   for(var i = 0;i <p.length;i++){

  　　if(p[i].className=='media active'){

       var  obj = p[i]

       var id =  obj.getAttribute("id")
    
       }
    }

	if(p.hasClass("active")){
	      ok5= true;
	  }
	  else{
	      alert("请选择套餐");
	      ok5 = false;
	  }
	if($("#ADD").val()==""){
		 alert("请输入详细地址");
		 ok4 = false;
	}
	else{
		 ok4= true;
	}
	if($("#phone").val()==""){
		 alert("请输入联系电话");
		 ok3 = false;
	}
	else{
		 ok3= true;
	}
	  if($("#idCard").val()==""){
		 alert("请输入身份证号码");
		 ok2 = false;
	}
	else{
		 ok2= true;
	}
	if($("#name").val()==""){
		 alert("请输入姓名");
		 ok1 = false;
	}else{
		 ok1= true;
	}

//全为真执行

 if(ok1&&ok2&&ok3&&ok4&&ok5){

    alert(id)
    
  }  

 })



</script>


